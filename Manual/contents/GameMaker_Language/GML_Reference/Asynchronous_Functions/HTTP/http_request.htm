<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>http_request</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css" />
  <script src="../../../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Reference page for http_request" />
  <meta name="rh-index-keywords" content="http_request" />
  <meta name="search-keywords" content="http_request" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>http_request</h1>
  <p>Con questa funzione è possibile creare una richiesta di intestazione HTTP per definire i parametri operativi di una transazione HTTP, che può essere utilizzata per molte cose come (ad esempio) l'autenticazione tramite intestazioni HTTP se si utilizzano API RESTful. La funzione richiede l'indirizzo IP completo di <span class="notranslate">server</span> da cui effettuare la richiesta e il tipo di richiesta da effettuare (come <span class="notranslate">string</span>, vedere la nota seguente): &quot;GET&quot;, &quot;HEAD&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;TRACE&quot;, &quot;OPTIONS&quot; o &quot;CONNECT&quot;. Si dovrà anche fornire un <span class="inline"><a href="../../Data_Structures/DS_Maps/DS_Maps.htm">DS map</a></span> di coppie chiave/valore (come <span class="notranslate">strings</span>, dove la chiave è il campo dell'intestazione e il valore è il dato richiesto per l'intestazione) e l'ultimo argomento è un dato opzionale <span class="notranslate">string</span> che si può aggiungere alla richiesta e, se non è necessario, può essere 0 o un <span class="notranslate">string</span> vuoto &quot;&quot;. Si noti che si può anche inviare un <span class="notranslate">buffer</span> (si veda la sezione sui <a href="../../Buffers/Buffers.htm">buffer</a> per maggiori dettagli), nel qual caso l'ultimo parametro sarebbe l'indice del <span class="notranslate">buffer</span> da inviare.</p>
  <p class="note"><b>NOTA</b>: Le intestazioni HTTP normalmente seguono il formato &quot;chiave:valore&quot;, ma poiché <span data-keyref="GameMaker Name">GameMaker</span> crea queste coppie per voi dalla ds_map, non è necessario includere i due punti &quot;:&quot; nella chiave o nel valore della mappa <span class="notranslate">strings</span>.</p>
  <p class="note"><b>NOTA</b>: Quando si usa un <span class="notranslate">buffer</span> per l'argomento body, se la posizione di ricerca di <span class="notranslate">buffer</span> è all'inizio (0), non viene inviato alcun body e <span class="notranslate">buffer</span> viene riempito con la risposta della chiamata http; se invece la posizione di ricerca di <span class="notranslate">buffer</span> è diversa da zero, il contenuto di <span class="notranslate">buffer</span> <span class="notranslate">string</span> viene inviato come body.</p>
  <p class="note"><b>NOTA</b>: È necessario tenere presente che, a causa della protezione XSS dei browser, le richieste e i tentativi di caricamento di risorse provenienti da domini diversi vengono bloccati e potrebbero restituire risultati vuoti. Per ulteriori dettagli, consultare la sezione <a href="HTTP.htm">Problemi di dominio incrociato</a>.</p>
  <p>Questa funzione restituisce un valore <span data-keyref="Type_ID_Async_Event"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Reference/Asynchronous_Functions/Asynchronous_Functions.htm">ID richiesta asincrona</a></span> che può essere usato per identificare il suo callback, come descritto di seguito.</p>
  <h2>Richiamo asincrono</h2>
  <p>Questo evento genererà un &quot;callback&quot; che verrà raccolto da qualsiasi <a href="../../../../The_Asset_Editors/Object_Properties/Async_Events/HTTP.htm">evento HTTP asincrono</a>, nel qual caso genererà un <span class="inline">DS Map</span> che è esclusivo di questo evento ed è memorizzato nella variabile speciale <a href="../../../GML_Overview/Variables/Builtin_Global_Variables/async_load.htm"><b>async_load</b></a>. Questa mappa DS ha le seguenti due chiavi relative alla funzione di richiesta:</p>
  <ul class="colour">
    <li><b>id: </b>L'ID restituito dalla funzione. Se si invia una serie di richieste a <span class="inline">http_</span>, è necessario sapere quale risposta si sta ricevendo, quindi si userà questo valore per confrontarlo con quello memorizzato al momento dell'invio della richiesta per trovare quella giusta.</li>
    <li><b>response_headers:</b> Se ha un valore maggiore o uguale a 0, contiene una mappa DS che contiene le intestazioni HTTP restituite con la risposta alla richiesta HTTP.</li>
  </ul>
  <p> </p>
  <h4>Sintassi:</h4>
  <p class="code">http_request(url, method, header_map, body);</p>
  <table>
    <tbody>
      <tr>
        <th>Argomento</th>
        <th>Tipo</th>
        <th>Descrizione</th>
      </tr>
      <tr>
        <td><span class="notranslate">url</span></td>
        <td><span data-keyref="Type_String"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Stringa</a></span></td>
        <td><span class="notranslate">The web address of the server that you wish to get information from</span></td>
      </tr>
      <tr>
        <td><span class="notranslate">method</span></td>
        <td><span data-keyref="Type_String"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Stringa</a></span></td>
        <td><span class="notranslate">The request method (normally <span class="inline2">&quot;POST&quot;</span> o <span class="inline2">&quot;GET&quot;</span>, ma tutti i metodi sono supportati)</td>
      </tr>
      <tr>
        <td><span class="notranslate">header_map</span></td>
        <td><span data-keyref="Type_ID_DS_Map"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/ds_map_create.htm">ID mappa DS</a></span></td>
        <td><span class="notranslate">A ds_map with the required header fields</span></td>
      </tr>
      <tr>
        <td><span class="notranslate">body</span></td>
        <td><span data-keyref="Type_Real"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Reale</a></span>, <span data-keyref="Type_String"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Stringa</a></span>, o <span data-keyref="Type_ID_Buffer"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Reference/Buffers/buffer_create.htm">ID buffer</a></span></td>
        <td><span class="notranslate">The data to be transmitted following the headers (can be a binary buffer handle)</span></td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h4>Restituzione:</h4>
  <p class="code"><span data-keyref="Type_ID_Async_Event"><a data-rhwidget="HyperlinkPopover" href="../../../../../GameMaker_Language/GML_Reference/Asynchronous_Functions/Asynchronous_Functions.htm">Async Request ID</a></span></p>
  <p> </p>
  <h4>Esempio:</h4>
  <p class="code">var map = ds_map_create();<br />
    ds_map_add(map, &quot;Host&quot;, &quot;225.0.0.97:3000&quot;);<br />
    ds_map_add(map, &quot;Connection&quot;, &quot;keep-alive&quot;);<br />
    ds_map_add(map, &quot;Content-Length&quot;, &quot;169&quot;);<br />
    ds_map_add(map, &quot;Cache-Control&quot;, &quot;max-age=0&quot;);<br />
    ds_map_add(map, &quot;Authorization&quot;, &quot;Basic eW95b19hZG1pbjpjNG5lZmllbGQ=&quot;);<br />
    ds_map_add(map, &quot;Accept&quot;, &quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&quot;);<br />
    ds_map_add(map, &quot;User-Agent&quot;, &quot;Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.57 Safari/537.36&quot;);<br />
    ds_map_add(map, &quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);<br />
    ds_map_add(map, &quot;Accept-Encoding&quot;, &quot;gzip,deflate,sdch&quot;);<br />
    ds_map_add(map, &quot;Accept-Language&quot;, &quot;en-GB,en-US;q=0.8,en;q=0.6&quot;);<br />
    ds_map_add(map, &quot;Cookie&quot;, &quot;request_method=GET; _InAppPurchases_session=69bb6ef6eec2b&quot;);<br />
    var data=&quot;utf8=%E2%9C%93&amp;authenticity_token=kPmS14DcYcuKgMFZUsN3XFfj3mhs%3D&amp;product%5Bname%5D=CatchTheHaggis&amp;product%5Bproduct_id%5D=http_test&amp;commit=Create+Product&quot;;<br />
    request = http_request(&quot;http:225.0.0.97:3000/products&quot;, &quot;POST&quot;, map, data);</p>
  <p>Il codice precedente crea una mappa DS con le intestazioni HTTP rilevanti per la funzione, quindi crea un dato <span class="notranslate">string</span> da utilizzare in quanto si tratta di una richiesta POST. Infine, la funzione viene chiamata e il suo valore ID viene memorizzato nella variabile &quot;request&quot; per essere controllato nell'evento asincrono HTTP.</p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Indietro: <a href="HTTP.htm">HTTP</a></div>
        <div style="float:right">Il prossimo: <a href="http_get.htm"><span class="notranslate">http_get</span></a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright <span class="notranslate">YoYo Games Ltd.</span> 2022 Tutti i diritti riservati</span></h5>
  </div>
  <!-- KEYWORDS
http_request
-->
  <!-- TAGS
http_request
-->
</body>
</html>